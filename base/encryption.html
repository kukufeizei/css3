<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>encryption</title>
</head>
<body>
<script src="https://cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>
<script src="https://cdn.bootcss.com/js-sha1/0.6.0/sha1.min.js"></script>
<script src="https://cdn.bootcss.com/crypto-js/3.1.9-1/crypto-js.min.js"></script>
<script>
    onload = () => {
        const plaintext = '!@#$%^&*()-_=+{[]}\\|;:\'",<.>/?a0â‹™ðŸ™ƒç£Š';
        let ciphertext;

        write('å¯†ç æ˜Žæ–‡ => ', plaintext);

        // btoaå’Œatobä¸èƒ½è½¬åŒ–Latin1èŒƒå›´ä¹‹å¤–çš„å­—ç¬¦ ä½¿ç”¨encodeURIComponentå’ŒdecodeURIComponentè§£å†³
        ciphertext = btoa(encodeURIComponent(plaintext));
        write("Base64 ç¼–ç  => ", ciphertext);
        write("Base64 è§£ç  => ", decodeURIComponent(atob(ciphertext)));
        // ç»æµ‹è¯•ä¸Ž Java MD5 åŠ å¯†ç»“æžœä¸€è‡´
        write('MD5 åŠ å¯† => ', md5(plaintext));
        write('SHA1 åŠ å¯† => ', sha1(plaintext));

        let aseKey = '12345678' // ç§˜é’¥å¿…é¡»ä¸º 8/16/32ä½
        // åŠ å¯†
        ciphertext = aesEncrypt(plaintext, aseKey);
        write('ASE åŠ å¯† => ', ciphertext);
        // è§£å¯†
        write('ASE è§£å¯† => ', aesDecrypt(ciphertext, aseKey));

    }

    function aesEncrypt(plaintext, aseKey) {
        return CryptoJS.AES.encrypt(plaintext, CryptoJS.enc.Utf8.parse(aseKey), {
            mode: CryptoJS.mode.ECB,
            padding: CryptoJS.pad.Pkcs7
        });
    }

    function aesDecrypt(ciphertext, aseKey) {
        return CryptoJS.AES.decrypt(ciphertext, CryptoJS.enc.Utf8.parse(aseKey), {
            mode: CryptoJS.mode.ECB,
            padding: CryptoJS.pad.Pkcs7
        }).toString(CryptoJS.enc.Utf8);
    }

    const write = function () {
        document.write(Array.prototype.slice.call(arguments).join('') + '<br>');
    }

    const chars = '0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ+/'.split('');

    function str10to64(number) {
        let radix = chars.length,
            result = [],
            mod;
        do {
            mod = number % radix;
            number = (number - mod) / radix;
            result.unshift(chars[mod]);
        } while (number);
        return result.join('');
    }

    function str64to10(number) {
        number = String(number);
        let radix = chars.length,
            len = number.length,
            i = 0,
            result = 0;
        while (i < len) {
            result += Math.pow(radix, i++) * chars.indexOf(number.charAt(len - i) || 0);
        }
        return result;
    }

    console.log(str10to64(100));
    console.log(str64to10('1A'));
</script>
</body>
</html>
